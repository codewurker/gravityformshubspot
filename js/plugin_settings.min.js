window.GFHubSpotSettings=null,function(o){GFHubSpotSettings=function(){var i=this;this.init=function(){this.pageURL=gform_hubspot_pluginsettings_strings.settings_url,this.deauthActionable=!1,this.bindDeauthorize(),this.bindClearCache()},this.bindDeauthorize=function(){o(".gform_hubspot_deauth_button").on("click",function(t){t.preventDefault();var a=o("#gform_hubspot_deauth_button"),t=o("#deauth_scope"),e=gform_hubspot_pluginsettings_strings.disconnect;if(i.deauthActionable){var n=o("#deauth_scope0").is(":checked")?"site":"account";if(!confirm(e[n]))return!1;a.attr("disabled","disabled"),o.ajax({async:!1,url:ajaxurl,dataType:"json",method:"POST",data:{action:"gfhubspot_deauthorize",scope:n,nonce:gform_hubspot_pluginsettings_strings.deauth_nonce},success:function(t){t.success?window.location.href=i.pageURL:alert(t.data.message),a.removeAttr("disabled")}}).fail(function(t,e,n){alert(n),a.removeAttr("disabled")})}else o(".gform_hubspot_deauth_button").eq(0).hide(),t.show(0,function(){i.deauthActionable=!0})})},this.bindClearCache=function(){o("#clear_hubspot_cache").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=o(this);e.attr("disabled",!0),o.ajax({method:"POST",url:ajaxurl,data:{action:"gf_hubspot_clear_cache",nonce:gform_hubspot_pluginsettings_strings.clear_cache_nonce},success:function(t){"last_clearance"in t.data&&(jQuery(".success-alert-container").fadeIn(),o("#last_cache_clearance .time").text(t.data.last_clearance))},error:function(){jQuery(".error-alert-container").fadeIn()},complete:function(){e.attr("disabled",!1),setTimeout(function(){jQuery(".alert-container").fadeOut()},1e4)}})})},this.init()},o(document).ready(GFHubSpotSettings)}(jQuery);